<!DOCTYPE html>
<html
   xmlns:th="https://www.thymeleaf.org"
   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
   layout:decorate="~{base}"
>
   <head>
      <title>Νέο Αίτημα</title>
   </head>

   <body>
      <main layout:fragment="main" class="content-main container-sm">
         <p class="mb-4">
            <a th:href="@{/tickets}" style="color: var(--primary-color)"
               ><i class="fas fa-arrow-left"></i> Πίσω στη Λίστα</a
            >
         </p>

         <div class="card-box">
            <h1 class="text-xl text-center" style="margin-bottom: 10px">
               Υποβολή Νέου Αιτήματος
            </h1>
            <p
               class="text-md text-center"
               style="color: #666; margin-bottom: 30px"
            >
               Επιλέξτε Υπηρεσία και περιγράψτε το αίτημά σας.
            </p>

            <!-- ACTION points to /tickets/new -->
            <form
               th:action="@{/tickets/new}"
               method="post"
               th:object="${openRequest}"
            >
               <div class="form-group">
                  <label for="requestTypeId" class="form-label"
                     >Τύπος Αιτήματος</label
                  >
                  <select
                     id="requestTypeId"
                     name="requestTypeId"
                     th:field="*{requestTypeId}"
                     class="form-select"
                     required
                  >
                     <option value="">-- Επιλέξτε Τύπο Αιτήματος --</option>
                     <option
                        th:each="rt : ${requestTypes}"
                        th:value="${rt.id}"
                        th:text="${rt.name}"
                     ></option>
                  </select>
                  <div
                     class="error-message"
                     th:if="${#fields.hasErrors('requestTypeId')}"
                     th:errors="*{requestTypeId}"
                  ></div>
               </div>

               <div class="form-group">
                  <label for="subject" class="form-label">Θέμα Αιτήματος</label>
                  <input
                     type="text"
                     id="subject"
                     name="subject"
                     th:field="*{subject}"
                     class="form-control"
                     placeholder="π.χ. Αίτηση Βεβαίωσης Μόνιμης Κατοικίας"
                     required
                  />
                  <div
                     class="error-message"
                     th:if="${#fields.hasErrors('subject')}"
                     th:errors="*{subject}"
                  ></div>
               </div>

               <div class="form-group">
                  <label for="content" class="form-label"
                     >Περιεχόμενο / Αναλυτική Περιγραφή</label
                  >
                  <textarea
                     id="content"
                     name="content"
                     th:field="*{content}"
                     class="form-textarea"
                     rows="5"
                     placeholder="Αναλυτική περιγραφή του αιτήματος ή του προβλήματος..."
                     required
                  ></textarea>
                  <div
                     class="error-message"
                     th:if="${#fields.hasErrors('content')}"
                     th:errors="*{content}"
                  ></div>
               </div>

               <div class="form-group">
                  <label for="attachmentUrl" class="form-label"
                     >Συνημμένο (URL)</label
                  >
                  <input
                     type="url"
                     id="attachmentUrl"
                     name="attachmentUrl"
                     th:field="*{attachmentUrl}"
                     class="form-control"
                     placeholder="π.χ. https://storage.gr/document.pdf"
                  />
                  <p class="text-sm" style="color: #999; margin-top: 5px">
                     (Προαιρετικό)
                  </p>
                  <div
                     class="error-message"
                     th:if="${#fields.hasErrors('attachmentUrl')}"
                     th:errors="*{attachmentUrl}"
                  ></div>
               </div>

               <div class="form-group mt-4 text-center">
                  <button
                     type="submit"
                     class="btn btn-primary text-md"
                     style="padding: 10px 40px"
                  >
                     <i class="fas fa-paper-plane"></i> Υποβολή
                  </button>
               </div>
            </form>
         </div>
      </main>
   </body>
</html>
